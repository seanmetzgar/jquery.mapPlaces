/* jQuery Map Places / version: 1.0.0 / author: Sean Metzgar */
(function(b){b.mapPlaces=function(f,h){var l,a={};this.version="1.0.0";l="https:"===window.location.protocol?"https:":"http:";a.defaults={mapWidth:600,mapHeight:350,apiKey:"AIzaSyCaN2XlwZVROBpQB42yk9WNVwBtLJZgkMc",mapZoom:14,mapLat:40.0306,mapLong:-75.2328,icons:{},radius:600,categories:[{name:"Churches",types:"cemetery church hindu_temple mosque synagogue place_of_worship".split(" ")},{name:"Entertainment",types:"amusement_park aquarium art_gallery bowling_alley casino gym movie_theater museum night_club spa zoo campground park stadium".split(" ")},
{name:"Public Transit",types:["bus_station","subway_station","taxi_stand","train_station"]},{name:"Restraurants",types:"bar cafe food meal_delivery meal_takeaway restaurant".split(" ")},{name:"Retail",types:"bakery bicycle_store book_store clothing_store convenience_store department_store electronics_store florist furniture_store gas_station grocery_or_supermarket hardware_store home_goods_store jewelry_store liquor_store movie_rental pet_store pharmacy shoe_store shopping_mall store beauty_salon hair_care".split(" ")},
{name:"Services",types:"airport bank courthouse dentist doctor fire_station hospital laundry library police post_office school veterinary_care".split(" ")}]};a.element=f;a.$element=b(f);a.$container=null;a.$loader=null;a.$foundation=null;a.$search=null;a.$searchForm=null;a.$list=null;a.mapCenter=null;a.mapProp={};a.map=null;a.placesService=null;a.mapAPI=void 0!==window.google&&void 0!==window.google.maps?window.google.maps:!1;a.googleLoad=void 0!==window.google&&void 0!==window.google.load?window.google.load:
!1;a.mapMarkers=[];a.mapInfoWindow=null;a.classes={containerClass:"mapPlacesContainer",loaderClass:"mapPlacesLoader",foundationClass:"mapPlacesFoundation",searchClass:"mapPlacesSearch",searchFieldContainerClass:"mapPlacesFieldContainer",infoWindowContentClass:"mapPlacesInfoWindow",infoWindowContentNameClass:"mpName",infoWindowContentVicinityClass:"mpVicinity",infoWindowContentIconClass:"mpIcon",listClass:"mapPlacesList"};a.formDetails={searchFormName:"mapPlacesSearchForm",searchFieldName:"mapPlacesSearchField"};
a.settings={};a.methods={buildFramework:function(){a.$container=b('<div class="'+a.classes.containerClass+'"></div>').appendTo(a.$element);a.$foundation=b('<div class="'+a.classes.foundationClass+'"></div>').appendTo(a.$container).css({width:a.settings.mapWidth,height:a.settings.mapHeight});a.mapAPI||(a.googleLoad?a.methods.loadGoogleMaps():b.getScript(l+"//www.google.com/jsapi",a.methods.loadGoogleMaps))},loadGoogleMaps:function(){a.googleLoad=window.google.load;a.googleLoad("maps",3,{other_params:"libraries=places&sensor=false",
callback:function(){a.mapAPI=window.google.maps;a.mapInfoWindow=new a.mapAPI.InfoWindow;a.methods.buildMap();a.methods.buildSearch()}})},buildMap:function(){a.mapCenter=new a.mapAPI.LatLng(a.settings.mapLat,a.settings.mapLong);a.mapProp={center:a.mapCenter,zoom:a.settings.mapZoom,mapTypeId:a.mapAPI.MapTypeId.ROADMAP,panControl:!0,zoomControl:!0,mapTypeControl:!0,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,draggable:!0,disableDoubleClickZoom:!0,scrollwheel:!1};a.map=new a.mapAPI.Map(a.$foundation.get(0),
a.mapProp);a.placesService=new a.mapAPI.places.PlacesService(a.map)},buildSearch:function(){var c=null,k=null,d=null,e=0;a.$search=b('<div class="'+a.classes.searchClass+'"></div>').prependTo(a.$container);a.$list=b('<ul class="'+a.classes.listClass+'"></ul>').appendTo(a.$container);a.$searchForm=b('<form name="'+a.formDetails.searchFormName+'"></form>').appendTo(a.$search);for(e=0;e<a.settings.categories.length;e+=1)c=a.settings.categories[e].name,k=a.formDetails.searchFieldName+"-"+e,d=b('<div class="'+
a.classes.searchFieldContainerClass+'"></div>').appendTo(a.$searchForm),b('<input type="checkbox" name="'+a.formDetails.searchFieldName+'" id="'+k+'" value="'+e+'">').appendTo(d),b('<label for="'+k+'">'+c+"</label>").appendTo(d);a.$searchForm.find("input[name="+a.formDetails.searchFieldName+"]").change(function(){a.$searchForm.find("input[name="+a.formDetails.searchFieldName+"]").prop("disabled",!0);a.methods.clearMarkers();a.methods.clearListItems();a.$searchForm.find("input[name="+a.formDetails.searchFieldName+
"]:checked").each(function(){e=parseInt(b(this).val(),10);!isNaN(e)&&Array.isArray(a.settings.categories[e].types)&&a.methods.nearbySearch(a.settings.categories[e],a.settings.radius)});a.$searchForm.find("input[name="+a.formDetails.searchFieldName+"]").prop("disabled",!1);a.$searchForm.find("input[name="+a.formDetails.searchFieldName+"]").removeProp("disabled")})},nearbySearch:function(c,b){var d={};b="number"===typeof b?b:a.settings.radiusValues[a.settings.radiusValues.length-1].meters;Array.isArray(c.types)&&
(d={location:a.mapCenter,radius:b,types:c.types},a.placesService.nearbySearch(d,function(d,b){a.methods.nearbySearchCallback(d,b,c)}))},nearbySearchCallback:function(c,b,d){var e=null,g=0,f=null;d.hasOwnProperty("icon")&&0<d.icon.length&&(f=d.icon);if(b===a.mapAPI.places.PlacesServiceStatus.OK)for(g=0;g<c.length;g+=1)e=c[g],a.methods.createMarker(e,f),a.methods.createListItem(e,f)},createListItem:function(c,f){var d="";"object"===typeof c&&(d="<li>",null!==f&&(d+='<img src="'+f+'" class="'+a.classes.infoWindowContentIconClass+
'">'),d+='<p class="'+a.classes.infoWindowContentNameClass+'">'+c.name+"</p>",c.hasOwnProperty("vicinity")&&0<c.vicinity.length&&(d+='<p class="'+a.classes.infoWindowContentVicinityClass+'">'+c.vicinity+"</p>"),b(d+"</li>").appendTo(a.$list))},createMarker:function(c,b){var d=null,d=null,e="";"object"===typeof c&&(d=c.geometry.location,d=new a.mapAPI.Marker({map:a.map,position:d,icon:b}),a.mapAPI.event.addListener(d,"click",function(){e='<div class="'+a.classes.infoWindowContentClass+'">';e+='<p class="'+
a.classes.infoWindowContentNameClass+'">'+c.name+"</p>";c.hasOwnProperty("vicinity")&&0<c.vicinity.length&&(e+='<p class="'+a.classes.infoWindowContentVicinityClass+'">'+c.vicinity+"</p>");e+="</div>";a.mapInfoWindow.setContent(e);a.mapInfoWindow.open(a.map,this)}),a.mapMarkers.push(d),d=null)},clearListItems:function(){a.$list.html("")},clearMarkers:function(){var c=0;if(0<a.mapMarkers.length){for(c=0;c<a.mapMarkers.length;c+=1)a.mapMarkers[c].setMap(null),a.mapMarkers[c]=null;a.mapMarkers=[]}a.mapMarkers=
[]}};this.init=function(){a.settings=b.extend({},a.defaults,h);a.methods.buildFramework();Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)})};this.init()};b.fn.mapPlaces=function(f){return this.each(function(){if(void 0===b(this).data("mapPlaces")){var h=new b.mapPlaces(this,f);b(this).data("mapPlaces",h)}})}})(jQuery);